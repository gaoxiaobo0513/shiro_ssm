<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"  
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper  namespace="com.gaoxiaobo.shiro.dao.UserDao" >

	<!-- 新增用户 -->
	<insert id="createUser" parameterType="User">
		insert into sys_users(
			username, password, salt, locked) 
		values
			(#{username},#{password},#{salt}, #{locked})
	</insert>
	
	<!-- 更新用户信息 -->
	<update id="updateUser" parameterType="User">
		update sys_users 
		set 
		username=#{username}, password=#{password}, salt=#{salt}, locked=#{locked} 
		where
		id=#{id}
	</update>
	
	<!-- 删除用户 -->
	<delete id="deleteUser" parameterType="long">
		delete from sys_users where id=#{id}
	</delete>
	
	<!-- 为用户添加角色 -->
	<insert id="correlationRoles" >
		insert into sys_users_roles(user_id, role_id) values
		<foreach collection="roleIds" item="roleId" index="index" separator=",">
			(#{userId},#{roleId})
		</foreach>
	</insert>
	
	<parameterMap type="" id="">
		<parameter property="" />
	</parameterMap>
	<select id="getByUsername" parameterType="string" resultType="User">
		<![CDATA[
			select * from t_user where username=#{username}					
		]]>
	</select>
</mapper>